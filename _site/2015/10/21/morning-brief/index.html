<!DOCTYPE html>
<html lang="en">
	<head>
				<meta charset="utf-8">
<title>Orbitist News | The most epic of the animal kingdom - the Arctic Tern</title>
<meta name="description" content="The arctic tern is one of the most epic animals on this earth! The little creature spends it's life chasing the sun from the arctic to the antarctic. It makes this increadible journey every year giving it the distinction of having the furthest annual migration of any known species– some individuals traveling as far as 80,000 km per year.">
<meta name="author" content="Orbitist">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Orbitist">
<meta property="og:title"           content="The most epic of the animal kingdom - the Arctic Tern" /> 
<meta property="og:description" content="The arctic tern is one of the most epic animals on this earth! The little creature spends it's life chasing the sun from the arctic to the antarctic. It makes this increadible journey every year giving it the distinction of having the furthest annual migration of any known species– some individuals traveling as far as 80,000 km per year." />
<meta property="og:image"           content="https://app.orbitist.com/sites/default/files/styles/leaflet_popup__301_x_270_/public/images/Arctic_tern_8664.jpg?itok=palZDRvD" />
<link rel="apple-touch-startup-image" href="https://orbitist.s3.amazonaws.com/_toplevel/images/logos/splash.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://orbitist.s3.amazonaws.com/_toplevel/images/logos/1000_illustrated.jpg">

<!-- HTML5 element support for IE6-8 -->
<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->

<!-- CartoDB CSS and JS. Includes Jquery and Leaflet -->
<link rel="stylesheet" href="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/themes/css/cartodb.css" />
<script src="https://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/3.15/cartodb.js"></script>
<script src="https://app.orbitist.com/launch/cdn/orbitist-js/leaflet-hash.js"></script>
<link rel="stylesheet" href="https://app.orbitist.com/launch/cdn/orbitist-js/leaflet-markercluster/dist/MarkerCluster.css" />
<link rel="stylesheet" href="https://app.orbitist.com/launch/cdn/orbitist-js/leaflet-markercluster/dist/MarkerCluster.Default.css" />
<script src="https://app.orbitist.com/launch/cdn/orbitist-js/leaflet-markercluster/dist/leaflet.markercluster-src.js"></script>

<!-- Leaflet Locate Control -->
<link rel="stylesheet" href="https://app.orbitist.com/launch/cdn/orbitist-js/leaflet-locatecontrol/dist/L.Control.Locate.min.css" />
<!--[if lt IE 9]>
	<link rel="stylesheet" href="https://app.orbitist.com/launch/cdn/orbitist-js/leaflet-locatecontrol/dist/L.Control.Locate.ie.min.css"/>
<![endif]-->
<script src="https://app.orbitist.com/launch/cdn/orbitist-js/leaflet-locatecontrol/dist/L.Control.Locate.min.js" ></script>

<!-- Font Awesome CSS -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

<!-- Lightbox -->
<script src="https://app.orbitist.com/launch/plugins/lightbox/js/lightbox.min.js"></script>
<link href="https://app.orbitist.com/launch/plugins/lightbox/css/lightbox.css" rel="stylesheet" />

<!-- Fast Click Lib -->
<script type='application/javascript' src='https://app.orbitist.com/launch/plugins/fastclick.js'></script>

<!-- Custom CSS -->
<link rel="stylesheet" href="https://app.orbitist.com/launch/cdn/orbitist-css/style.css">
<link rel="stylesheet" href="https://app.orbitist.com/launch/cdn/orbitist-css/fullscreen.css">
<link rel="stylesheet" href="https://app.orbitist.com/launch/cdn/orbitist-css/leaflet.css">
<link rel="stylesheet" href="https://app.orbitist.com/launch/cdn/orbitist-css/top-level.css">

<!-- Orbitist News CSS -->
<link rel="stylesheet" href="/css/style.css">
	</head>
	<body>
			<!-- Spinner -->
		<div class="spinner">
			<div class="sk-spinner sk-spinner-pulse"></div>
		</div>

		<!-- map -->
		<div class="map" id="map"></div>
		
		
		<!-- map info button -->
		<div class="fullscreen-toggle z10">
     		<button type="button" class="map-button btnmapinfo"><i class="fa fa-info-circle"></i> Info</button>
		</div><!-- fullscreen-toggle -->

		<!-- Story Slide -->
		<div class="story-slide z20 in">
			<button type="button" class="map-button btnmapinfo btnmapinfo-close in" aria-label="Close"><i class="fa fa-times"></i></button>
			<div class="mapinfo"></div>
			<div class="explore-container">
				<button type="button" class="map-button btn-explore btnmapinfo" data-dismiss="modal">Explore <i class="fa fa-long-arrow-right"></i></button>
			</div><!-- explore-container -->
		</div><!-- story-slide -->
		
		<!-- Home Button -->
		<a href="/" class="home-button z10"><img src="http://orbitist.s3.amazonaws.com/_toplevel/images/logos/orbitist.png" width="20px"> Orbitist News</a>
		

		<!-- Bootstrap JS -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
		
		<!-- Orbitist Custom scripts -->
		<script src="https://app.orbitist.com/launch/cdn/orbitist-js/custom.js"></script>

<script>
// Get mapid from the URL query string
function getUrlVars()
{
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
        hash = hashes[i].split('=');
        vars.push(hash[0]);
        vars[hash[0]] = hash[1];
    }
    return vars;
}
var mapId = 93;
		
// Retrieve map info
$(document).ready(
    function(){
        $.getJSON(
            'https://app.orbitist.com/api/v1/map_info.json?nid=' + mapId,
            function(data){
                // ciclo l'array
                for(i=0; i<data.length; i++){
                    var  content  = '<img src="';
                         content +=  data[i].mapimage;
                         content  += '" class="img-responsive">';
                    	 	 content  += '<div class="story-slide-content"><h4>';
                         content +=  data[i].maptitle;
                         content  += '</h4>';
                         content +=  data[i].mapbody;
                         content +=  '</div>';
                         cartodbkey =  data[i].mapcartodbkey;
                         basemapurl =  data[i].mapbasemap;
                         custombasemapurl = data[i].custombasemap;
                         customcss = data[i].mapcss;
                    $('div.mapinfo').append(content);
                    $('head').append('<style>' + customcss + '</style>');
					// Add cartodb layer
					cartodb.createLayer(map, cartodbkey).addTo(map);
					// Add an OSM tile layer
					L.tileLayer(custombasemapurl + basemapurl, {
					attribution: '&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors Â© <a href="http://mapbox.com/map-feedback/">Mapbox</a>'
					}).addTo(map);
                }
            }
        );
    }
);

// Set lat/long where the map initiates and at what zoom level
var map = new L.Map('map',{maxZoom: 18});





// Get points //
var json = (function () {
    var json = null;
    $.ajax({
        'async': false,
        'global': false,
        'url': 'https://app.orbitist.com/api/v1/geojson/' +  mapId,
        'dataType': "json",
        'success': function (data) {
            json = data;
        }
    });
    return json;
})(); 
 
var orbitistGeoJson = json;
  
// ADVANCED: This tells the map what goes in popups.
function orbitistPopup(feature, layer) {
    // does this feature have a property named popupContent?
    if (feature.properties && feature.properties.name) {
        layer.bindPopup(feature.properties.description, {closeButton: false});
    }
}

// Set cluster var 
var markers = L.markerClusterGroup({maxClusterRadius: 25, disableClusteringAtZoom: 17});

// Add markers to map based on geojson
var geoJsonLayer = L.geoJson(orbitistGeoJson, {
	pointToLayer: function(feature, latlng) {
	   var smallIcon = L.divIcon({
className: feature.properties.mapPointIconClass,
iconSize: [30, 30],
iconAnchor: [15, 30],
popupAnchor: [0, -28]
	   });
	   return L.marker(latlng, {icon: smallIcon});
	},
    onEachFeature: orbitistPopup
});

markers.addLayer(geoJsonLayer);
map.addLayer(markers);
map.fitBounds(markers.getBounds());

// Use leaflet hash
var hash = new L.Hash(map);
// Use leaflet locate control
L.control.locate().addTo(map);
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50308061-3', 'auto');
  ga('send', 'pageview');

</script>

<!-- spinner -->
<script>
$(document).ready(function() {
	$(this).find(".spinner").delay(2000).fadeOut(1000, function () {
		$(this).css({display:"none"});
	});
});
</script>

<!-- Prevent mobile safari on mobile web apps -->
<script>
// Mobile Safari in standalone mode
if(("standalone" in window.navigator) && window.navigator.standalone){
// If you want to prevent remote links in standalone web apps opening Mobile Safari, change 'remotes' to true
var noddy, remotes = false;
document.addEventListener('click', function(event) {
		noddy = event.target;
// Bubble up until we hit link or top HTML element. Warning: BODY element is not compulsory so better to stop on HTML
while(noddy.nodeName !== "A" && noddy.nodeName !== "HTML") {
	        noddy = noddy.parentNode;
	    }
if('href' in noddy && noddy.href.indexOf('http') !== -1 && (noddy.href.indexOf(document.location.host) !== -1 || remotes))
		{
event.preventDefault();
document.location.href = noddy.href;
		}
	},false);
}
</script>

<!-- Fast Click initiation -->
<script>
$(function() {
    FastClick.attach(document.body);
});
</script>
		
	</body>
</html>